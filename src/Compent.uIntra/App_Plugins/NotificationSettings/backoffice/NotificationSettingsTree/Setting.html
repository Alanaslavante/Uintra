<style>
    .custom-umb-panel-body {
        padding-left: 10px;
    }

    .tab._active {
        font-weight: bold;
    }
</style>

<umb-panel>
    <div class="umb-panel-body custom-umb-panel-body">
        <div ng-controller="settingController as ctrl">

            <span class="tab" ng-class="{'_active' : ctrl.isEmailTabSelected()}" ng-click="ctrl.selectEmailTab()">E-mail notification</span>
            <span class="tab" ng-class="{'_active' : ctrl.isUiTabSelected()}" ng-click="ctrl.selectUiTab()">In-App notification</span>

            <form id="settingsForm" name="settingsForm" data-ng-submit="settingsForm.$valid && ctrl.save()">
                
                <div ng-bind-html="ctrl.selectedNotifierSettings.notificationInfo"></div>

                <div ng-if="ctrl.isEmailTabSelected()">
                    <div>
                        <span>Do you want to enable this notification:</span>
                        <label for="enableEmailNotification">Yes, enable</label>
                        <input id="enableEmailNotification" type="radio" ng-model="ctrl.settings.emailNotifierSetting.isEnabled" ng-value="true">
                        <label for="disableEmailNotification">No, disable</label>
                        <input id="disableEmailNotification" type="radio" ng-model="ctrl.settings.emailNotifierSetting.isEnabled" ng-value="false">
                    </div>
                    <div>
                        <label for="emailSubject">E-mail subject:</label>
                        <input id="emailSubject" name="EmailSubject" type="text" ng-maxlength="400" required ng-model="ctrl.settings.emailNotifierSetting.template.subject"/>
                        <div data-ng-show="settingsForm.EmailSubject.$error.required">E-mail subject is required</div>
                        <div data-ng-show="settingsForm.EmailSubject.$error.maxlength">E-mail subject max length is 400 symbols</div>
                    </div>
                    <div>
                        <label for="emailContent">E-mail content:</label>
                        <tiny-mce id="emailContent" config="ctrl.config.description" required model="ctrl.settings.emailNotifierSetting.template.content"></tiny-mce>
                        <input type="hidden" name="EmailContent" ng-model="ctrl.settings.emailNotifierSetting.template.content" required=""/>
                        <div data-ng-show="settingsForm.EmailContent.$error.required">E-mail content is required</div>
                        <div data-ng-show="!ctrl.isControlTextHasValidLength(settingsForm.EmailContent, 4000)">Max length is 4000 symbols</div>
                    </div>
                </div>

                <div ng-if="ctrl.isUiTabSelected()">
                    <div>
                        <span>Do you want to enable this notification:</span>
                        <label for="enableUiNotification">Yes, enable</label>
                        <input id="enableUiNotification" type="radio" ng-model="ctrl.settings.uiNotifierSetting.isEnabled" ng-value="true">
                        <label for="disableUiNotification">No, disable</label>
                        <input id="disableUiNotification" type="radio" ng-model="ctrl.settings.uiNotifierSetting.isEnabled" ng-value="false">
                    </div>
                    <div>
                        <label for="uiMessage">In-App message:</label>
                        <textarea id="uiMessage" name="UiMessage" type="text" ng-maxlength="200" required ng-model="ctrl.settings.uiNotifierSetting.template.message"></textarea>
                        <div data-ng-show="settingsForm.UiMessage.$error.required">In-App message is required</div>
                        <div data-ng-show="settingsForm.UiMessage.$error.maxlength">In-App message max length is 200 symbols</div>
                    </div>
                </div>

                <input type="submit" value="Save" ng-disabled="settingsForm.$invalid"/>

            </form>
        </div>
    </div>
</umb-panel>