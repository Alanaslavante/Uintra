@using System.Web.Mvc.Ajax
@using System.Web.Mvc.Html
@model uCommunity.Likes.LikesViewModel
@{
    var isLiked = Model.CanAddLike ? "" : "_isLiked";
    var entityId = Model.ActivityId ?? Model.CommentId;

    var routeValues = Model.ActivityId.HasValue ? (object)new { activityId = Model.ActivityId } : (object)new { commentId = Model.CommentId };
}
<div class="like" id="likes_@entityId">
    <span class="like__set @isLiked"><i class="icon-like"></i> @Model.Users.Count()</span>

    @(Model.CanAddLike
        ? Ajax.ActionLink("Add", "AddLike", "Likes", routeValues, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = string.Concat("likes_", entityId) }, new { @class = "like__link" })
        : Ajax.ActionLink("Remove", "RemoveLike", "Likes", routeValues, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = string.Concat("likes_", entityId) }, new { @class = "like__link" }))

    @if (Model.Users.Any())
    {
        <div class="like__popup">
            @foreach (var name in Model.Users)
            {
                @Html.Label(name)
            }
        </div>
    }
</div>